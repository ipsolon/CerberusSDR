/**
 * \file fpga_axi.h
 * \brief Contains function prototypes for fpga_axi.c
 * RNM
 * \date 05.20.2014
 */

#ifndef FPGA_AXI_H_
#define FPGA_AXI_H_

#include <stdint.h>


int32_t fpgaAxiReadWrite(char *uiod, uint32_t map_size, uint32_t count, uint32_t offset, uint8_t rw, uint32_t *data);
uint32_t fpgaAxiRegRead(uint32_t physical_address,uint32_t reg_addr_offset, uint32_t *regData);
int32_t fpgaAxiRegWrite(uint32_t physical_address,uint32_t reg_addr_offset, uint32_t w_data);
int32_t fpgaAxiWritePhysicalMemory(uint32_t physical_address, uint32_t range, uint32_t reg_addr_offset, uint32_t *data);
int32_t fpgaAxiReadPhysicalMemory(uint32_t physical_address_base, uint32_t regCount, uint32_t reg_addr_offset, uint32_t *data);
int32_t fpgaAxiReadPhysicalMemoryPage(uint32_t page_addr, uint32_t *data);

void dumpFPGA_JESD_PHY_registers(uint32_t jesd_phy_physical_address_base);
void dumpFPGA_JESD_TXRX_registers(uint32_t jesd_tx_physical_address_base);


///////////////////////////////////////////////////////////////////////////////////////////////////////////////
///////////////////////////////////////////////////////////////////////////////////////////////////////////////

// TXRX_type: TX Framer>=1, RX Deframer=0
#define	FPGA_RX_DEFRAMER	0
#define	FPGA_TX_FRAMER		1




///////////////////////////////////////////////////////
// Base Addresses for all IP blocks in PL
///////////////////////////////////////////////////////
#define	BASEADDR_AXI_DMA_TX						0xA0000000
// #define	BASEADDR_AXI_DMA_TX						0xA0040000

// Used for chip resets
#define BASEADDR_AXI_GPIO_0_CHIP_RESETS			0xA0060000

// Used for DMA and FIFO resets
// Redefined BASEADDR_AXI_GPIO_FIFO_DMA_RESET in dma_proxy.h
// #define BASEADDR_AXI_GPIO_DMA_FIFO_RST			0xA0050000

//
#define BASEADDR_AXI_JESD0_DMA_RX				0xA0030000
// #define BASEADDR_AXI_JESD0_DMA_RX				0xA0070000

//
//	PL-DDR4 base address
// #define	BASEADDR_PLDDR4							0xB0000000
//
#define BASEADDR_JESD204_TX						0xA0070000
//
#define BASEADDR_JESD204_RX						0xA0020000
//
#define BASEADDR_JESD204_PHY					0xA0010000
// gpio reg in jesd subsystem
#define BASEADDR_JESD204_AXI_GPIO_0				0xA0040000
//	OCM base address
#define	BASEADDR_OCM							0xFF000000


///////////////////////////////////////////////////////
// Offset Register Addresses for JESD TX or RX Blocks
///////////////////////////////////////////////////////
#define FPGA_REG_JESD_TXRX_VERSION					0x00000000
#define FPGA_REG_JESD_TXRX_RESET					0x00000004
#define FPGA_REG_JESD_TXRX_ILA_SUPPORT				0x00000008
#define FPGA_REG_JESD_TXRX_SCRAMBLING				0x0000000C
#define FPGA_REG_JESD_TXRX_SYSREF_HANDLING			0x00000010
#define FPGA_REG_JESD_TXRX_ILA_MULTIFRAMES			0x00000014
#define FPGA_REG_JESD_TXRX_TEST_MODES				0x00000018
#define FPGA_REG_JESD_TXRX_LINK_ERROR_STATUS		0x0000001C
#define FPGA_REG_JESD_TXRX_OCTETS_PER_FRAME			0x00000020
#define FPGA_REG_JESD_TXRX_FRAMES_PER_MULTIFRAME	0x00000024
#define FPGA_REG_JESD_TXRX_LANES_IN_USE				0x00000028
#define FPGA_REG_JESD_TXRX_SUBCLASS_MODE			0x0000002C
#define FPGA_REG_JESD_TXRX_RX_BUFFER_DELAY			0x00000030
#define FPGA_REG_JESD_TXRX_ERROR_REPORTING			0x00000034
#define FPGA_REG_JESD_TXRX_SYNC_STATUS				0x00000038
#define FPGA_REG_JESD_TXRX_DEBUG_STATUS				0x0000003C

#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA0		0x00000800
#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA1		0x00000804
#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA2		0x00000808
#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA3		0x0000080C
#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA4		0x00000810
#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA5		0x00000814
#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA6		0x00000818
#define FPGA_REG_JESD_TXRX_LANE0_ILACONFIGDATA7		0x0000081C
#define FPGA_REG_JESD_TXRX_LANE0_TM_ERROR_CNT		0x00000820
#define FPGA_REG_JESD_TXRX_LANE0_LINK_ERROR_CNT		0x00000824
#define FPGA_REG_JESD_TXRX_LANE0_TM_ILA_ERROR_CNT	0x00000828
#define FPGA_REG_JESD_TXRX_LANE0_TM_MULTIFRAME_CNT	0x0000082C
#define FPGA_REG_JESD_TXRX_LANE0_BUFFER_ADJUST		0x00000830

#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA0		0x00000840
#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA1		0x00000844
#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA2		0x00000848
#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA3		0x0000084C
#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA4		0x00000850
#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA5		0x00000854
#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA6		0x00000858
#define FPGA_REG_JESD_TXRX_LANE1_ILACONFIGDATA7		0x0000085C
#define FPGA_REG_JESD_TXRX_LANE1_TM_ERROR_CNT		0x00000860
#define FPGA_REG_JESD_TXRX_LANE1_LINK_ERROR_CNT		0x00000864
#define FPGA_REG_JESD_TXRX_LANE1_TM_ILA_ERROR_CNT	0x00000868
#define FPGA_REG_JESD_TXRX_LANE1_TM_MULTIFRAME_CNT	0x0000086C
#define FPGA_REG_JESD_TXRX_LANE1_BUFFER_ADJUST		0x00000870

#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA0		0x00000880
#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA1		0x00000884
#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA2		0x00000888
#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA3		0x0000088C
#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA4		0x00000890
#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA5		0x00000894
#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA6		0x00000898
#define FPGA_REG_JESD_TXRX_LANE2_ILACONFIGDATA7		0x0000089C
#define FPGA_REG_JESD_TXRX_LANE2_TM_ERROR_CNT		0x000008A0
#define FPGA_REG_JESD_TXRX_LANE2_LINK_ERROR_CNT		0x000008A4
#define FPGA_REG_JESD_TXRX_LANE2_TM_ILA_ERROR_CNT	0x000008A8
#define FPGA_REG_JESD_TXRX_LANE2_TM_MULTIFRAME_CNT	0x000008AC
#define FPGA_REG_JESD_TXRX_LANE2_BUFFER_ADJUST		0x000008B0

#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA0		0x000008C0
#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA1		0x000008C4
#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA2		0x000008C8
#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA3		0x000008CC
#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA4		0x000008D0
#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA5		0x000008D4
#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA6		0x000008D8
#define FPGA_REG_JESD_TXRX_LANE3_ILACONFIGDATA7		0x000008DC
#define FPGA_REG_JESD_TXRX_LANE3_TM_ERROR_CNT		0x000008E0
#define FPGA_REG_JESD_TXRX_LANE3_LINK_ERROR_CNT		0x000008E4
#define FPGA_REG_JESD_TXRX_LANE3_TM_ILA_ERROR_CNT	0x000008E8
#define FPGA_REG_JESD_TXRX_LANE3_TM_MULTIFRAME_CNT	0x000008EC
#define FPGA_REG_JESD_TXRX_LANE3_BUFFER_ADJUST		0x000008F0




///////////////////////////////////////////////////////
// Offset Register Addresses for JESD PHY Blocks
///////////////////////////////////////////////////////
#define FPGA_REG_JESD_PHY_VERSION					0x0000
#define FPGA_REG_JESD_PHY_IP_CONFIGURATION			0x0004
#define FPGA_REG_JESD_PHY_NUM_COM_INTF				0x0008
#define FPGA_REG_JESD_PHY_NUM_TXCVR_INTF			0x000C
#define FPGA_REG_JESD_PHY_TIMEOUT_ENABLE			0x0014
#define FPGA_REG_JESD_PHY_TIMEOUT_VALUE				0x001C
#define FPGA_REG_JESD_PHY_COM_INTF_SELECTOR			0x0020
#define FPGA_REG_JESD_PHY_GT_INTF_SELECTOR			0x0024
#define FPGA_REG_JESD_PHY_TCVR_MSTR_CH_RX			0x0030
#define FPGA_REG_JESD_PHY_TCVR_MSTR_CH_TX			0x0034
#define FPGA_REG_JESD_PHY_RX_INTERFACE				0x0038
#define FPGA_REG_JESD_PHY_TX_INTERFACE				0x003C
// PLL and Clocking
#define FPGA_REG_JESD_PHY_PLL_STATUS				0x0080
#define FPGA_REG_JESD_PHY_RXLINERATE				0x0090
#define FPGA_REG_JESD_PHY_RXREFCLK					0x0098
#define FPGA_REG_JESD_PHY_RXXMULT					0x009C
#define FPGA_REG_JESD_PHY_RXPLL						0x00A0
#define FPGA_REG_JESD_PHY_TXLINERATE				0x00B0
#define FPGA_REG_JESD_PHY_TXREFCLK					0x00B8
#define FPGA_REG_JESD_PHY_TXXMULT					0x00BC
#define FPGA_REG_JESD_PHY_TXPLL						0x00C0
#define FPGA_REG_JESD_PHY_SW_CAPABLE				0x00D0
#define FPGA_REG_JESD_PHY_INS_LOSS					0x00D4
#define FPGA_REG_JESD_PHY_EQUALIZATION				0x00D8
#define FPGA_REG_JESD_PHY_MIN_RATE					0x00E0
#define FPGA_REG_JESD_PHY_MAX_RATE					0x00E4
// Common DRP Control
#define FPGA_REG_JESD_PHY_CM_DRP_ADDRESS			0x0104
#define FPGA_REG_JESD_PHY_CM_DRP_WRITE_DATA			0x0108
#define FPGA_REG_JESD_PHY_CM_DRP_READ_DATA			0x010C
#define FPGA_REG_JESD_PHY_CM_DRP_RESET				0x0110
#define FPGA_REG_JESD_PHY_CM_DRP_ACCESS_STATUS		0x0114
#define FPGA_REG_JESD_PHY_CM_DRP_ACCESS_COMPLETE	0x011C
// Transceiver DRP Control
#define FPGA_REG_JESD_PHY_TX_DRP_ADDRESS			0x0204
#define FPGA_REG_JESD_PHY_TX_DRP_WRITE_DATA			0x0208
#define FPGA_REG_JESD_PHY_TX_DRP_READ_DATA			0x020C
#define FPGA_REG_JESD_PHY_TX_DRP_RESET				0x0210
#define FPGA_REG_JESD_PHY_TX_DRP_ACCESS_STATUS		0x0214
#define FPGA_REG_JESD_PHY_TX_DRP_ACCESS_COMPLETE	0x021C
// Common QPLL Control
#define FPGA_REG_JESD_PHY_QPLL_POWER_DOWN			0x0304
#define FPGA_REG_JESD_PHY_QPLL1_POWER_DOWN			0x0308
// Tranceiver Control Bank 1
#define FPGA_REG_JESD_PHY_RX_POWERDOWN				0x0404
#define FPGA_REG_JESD_PHY_CPLL_POWERDOWN			0x0408
#define FPGA_REG_JESD_PHY_TX_PLL_CLK_SEL			0x040C
#define FPGA_REG_JESD_PHY_RX_PLL_CLK_SEL			0x0410
#define FPGA_REG_JESD_PHY_TX_POSTCURSOR				0x0414
#define FPGA_REG_JESD_PHY_TX_PRECURSOR				0x0418
#define FPGA_REG_JESD_PHY_LOOPBACK					0x041C
#define FPGA_REG_JESD_PHY_TX_SYSTEM_RST				0x0420
#define FPGA_REG_JESD_PHY_RX_SYSTEM_RST				0x0424
// Tranceiver Control Bank 2
#define FPGA_REG_JESD_PHY_TXPD						0x0504
#define FPGA_REG_JESD_PHY_TXDIFFCTRL				0x0508
#define FPGA_REG_JESD_PHY_TXINHIBIT					0x050C
#define FPGA_REG_JESD_PHY_TXPOLARITY				0x0510

// Tranceiver Control Bank 3
#define FPGA_REG_JESD_PHY_RXPOLARITY				0x0604
#define FPGA_REG_JESD_PHY_RXLPMEN					0x0608
#define FPGA_REG_JESD_PHY_RXDFELPMRESET				0x060C
#define FPGA_REG_JESD_PHY_RX_INVLD_SYNC				0x0610






#endif /* FPGA_AXI_H_ */

